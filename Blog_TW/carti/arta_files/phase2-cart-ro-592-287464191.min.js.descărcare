var iconHeart='<svg xmlns="http://www.w3.org/2000/svg" width="25.85" height="23.369" viewBox="0 0 25.85 23.369"><defs><style>.a{fill:#4A4A4A;stroke:#4A4A4A;stroke-width: 1px;}</style></defs><g transform="translate(0.5 0.5)"><path style="fill:#707070; stroke:#707070;stroke-width: 1px;" class="a" d="M18.016,0a6.885,6.885,0,0,0-5.591,2.857A6.885,6.885,0,0,0,6.834,0,7.162,7.162,0,0,0,0,7.115c0,3.694,2.125,7.5,6.145,11a33.068,33.068,0,0,0,6.09,4.2.422.422,0,0,0,.38,0,33.071,33.071,0,0,0,6.088-4.2c4.022-3.5,6.147-7.309,6.147-11A7.162,7.162,0,0,0,18.016,0ZM12.425,21.494C10.9,20.67.828,14.912.828,7.115A6.32,6.32,0,0,1,6.834.813a6.037,6.037,0,0,1,5.23,3.005.436.436,0,0,0,.722,0A6.037,6.037,0,0,1,18.016.813a6.32,6.32,0,0,1,6.005,6.3c0,7.8-10.076,13.554-11.6,14.378Zm0,0" transform="translate(0 0)"/></g></svg>';"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(let t=0;t<this.length;t++)e(this[t])}),"function"!=typeof String.prototype.replaceAll&&(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)}),document.addEventListener("scroll",(function(){document.querySelectorAll('[data-testing-id="cart-page"]').length>0&&toggleFixedCartElement()}));var cartPagejQueryCheckIndex=0,getCartPageData=function(){"undefined"!=typeof jQuery?($=jQuery,$(window).width()<991&&window.location.href.includes("/cart/")&&(document.getElementsByClassName("empty-cart").length||initializeCartPage())):cartPagejQueryCheckIndex<20&&(cartPagejQueryCheckIndex++,setTimeout(getCartPageData,500))};function capitalizeFirstLetter(e){return e.length>0?e[0].toUpperCase()+e.slice(1):""}function getProductOptionState(e){let t="";return e.getAttribute("selected")&&(t+="selected "),e.innerText.toLowerCase().includes("stoc epuizat")&&(t+="unvailable "),e.innerText.toLowerCase().includes("stoc epuizat")||e.getAttribute("selected")||(t+="default "),t}function getSimplifiedData(e){return(e=e.split("-")).forEach(((t,r)=>{if(t){const l=(t=t.replaceAll(" ","")).split(".");e[r]=l[0]+"."+l[1]}})),e.join(" - ")}function disableScroll(){let e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}}function enableScroll(){window.onscroll=function(){}}customConfig={},window.location.hostname.includes("elefant.ro")?customConfig={productArrivalRequest:`https://${window.location.hostname}/INTERSHOP/web/WFS/elefant-elefantRO-Site/ro_RO/-/RON/ETACall-GetArrivalTime`}:(LOCALE,customConfig={productArrivalRequest:`https://${window.location.hostname}/INTERSHOP/web/WFS/elefant-elefantMD-Site/ro_MD/-/MDL/ETACall-GetArrivalTime`});var cartConfig={};cartConfig="ru_MD"===LOCALE?{totalCost:"Сводка корзины: ",appliedVouchers:"Примененные ваучеры:",haveVoucher:"У тебя есть ваучер?",apply:"ПРИМЕНЯТЬ",addCodePlaceholder:"введите код здесь",nextStep:"Следующий шаг",isFree:"Бесплатно",preorderAvailable:"Доступно по предварительному заказу",months:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],fullArrivalTimeInfo:"Товар доступен по предварительному заказу. Доставка этого товара начнется",fullArrivalTimeInfoSpan:"Смета доставки: ",total:"Всего:",editProduct:"Изменить продукт",inStock:"В наличии",notInStock:"Продано",notInStockContent:"Товара сейчас нет в наличии",selectLabel:"Выберите",cancelButton:"Отмена",modifyButton:"Изменить",deliveryEstimation:"Ориентировочная доставка",promo:"Промо:",piece:"кусок"}:{totalCost:"Sumar coș: ",appliedVouchers:"Vouchere aplicate:",haveVoucher:"Ai un voucher?",apply:"APLICA",addCodePlaceholder:"introdu codul aici",nextStep:"Pasul urmator",isFree:"Gratuit",preorderAvailable:"Disponibil la precomandă",months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],fullArrivalTimeInfo:" Produsul este disponibil la precomandă. Livrarea pentru acest produs va începe în data de",fullArrivalTimeInfoSpan:"Estimare livrare: ",total:"Total:",editProduct:"Modifică produs",inStock:"In stoc",notInStock:"Stoc Epuizat",notInStockContent:"Momentan produsul nu se afla in stoc",selectLabel:"Alege",cancelButton:"Anulează",modifyButton:"Modifică",deliveryEstimation:"Estimare livrare",promo:"Promotie:",piece:"bucata"};var trashIcon='<svg xmlns="http://www.w3.org/2000/svg" width="16.545" height="20.363" viewBox="0 0 16.545 20.363"><defs><style>.a{fill:#a2a2a2;}</style></defs><g transform="translate(-48)"><path class="a" d="M62.954,2.545h-3.5V1.909A1.911,1.911,0,0,0,57.545,0H55a1.911,1.911,0,0,0-1.909,1.909v.636h-3.5A1.593,1.593,0,0,0,48,4.136V6.363A.636.636,0,0,0,48.636,7h.348l.55,11.545a1.907,1.907,0,0,0,1.907,1.818H61.1a1.907,1.907,0,0,0,1.907-1.818L63.56,7h.348a.636.636,0,0,0,.636-.636V4.136A1.593,1.593,0,0,0,62.954,2.545Zm-8.59-.636A.637.637,0,0,1,55,1.273h2.545a.637.637,0,0,1,.636.636v.636H54.363ZM49.273,4.136a.319.319,0,0,1,.318-.318H62.954a.319.319,0,0,1,.318.318V5.727h-14ZM61.739,18.484a.636.636,0,0,1-.636.606H51.441a.636.636,0,0,1-.636-.606L50.258,7H62.286Z"/><path class="a" d="M240.636,217.545a.636.636,0,0,0,.636-.636v-8.272a.636.636,0,0,0-1.273,0v8.272A.636.636,0,0,0,240.636,217.545Z" transform="translate(-184.364 -199.728)"/><path class="a" d="M320.636,217.545a.636.636,0,0,0,.636-.636v-8.272a.636.636,0,0,0-1.273,0v8.272A.636.636,0,0,0,320.636,217.545Z" transform="translate(-261.182 -199.728)"/><path class="a" d="M160.636,217.545a.636.636,0,0,0,.636-.636v-8.272a.636.636,0,0,0-1.273,0v8.272A.636.636,0,0,0,160.636,217.545Z" transform="translate(-107.546 -199.728)"/></g></svg>',closeIcon='<svg xmlns="http://www.w3.org/2000/svg" width="14.121" height="14.121" viewBox="0 0 14.121 14.121"><defs><style>.aa{fill:none;stroke:#fcfcfc;stroke-linecap:round;stroke-width:1.5px;}</style></defs><g transform="translate(1.061 1.061)"><line class="aa" x2="12" y2="12"/><line class="aa" y1="12" x2="12"/></g></svg>',iconCarCart='<svg xmlns="http://www.w3.org/2000/svg" width="15.327" height="10.626" viewBox="0 0 15.327 10.626"><defs><style>.aa{fill:#ff8152;}</style></defs><g transform="translate(0 -78.521)"><g transform="translate(9.644 85.283)"><path class="aa" d="M324.083,304.4a1.932,1.932,0,1,0,1.932,1.932A1.934,1.934,0,0,0,324.083,304.4Zm0,2.9a.966.966,0,1,1,.966-.966A.967.967,0,0,1,324.083,307.3Z" transform="translate(-322.151 -304.403)"/></g><g transform="translate(3.043 85.283)"><path class="aa" d="M103.579,304.4a1.932,1.932,0,1,0,1.932,1.932A1.934,1.934,0,0,0,103.579,304.4Zm0,2.9a.966.966,0,1,1,.966-.966A.967.967,0,0,1,103.579,307.3Z" transform="translate(-101.647 -304.403)"/></g><g transform="translate(9.901 79.487)"><path class="aa" d="M333.731,111.056a.483.483,0,0,0-.432-.266h-2.544v.966H333l1.315,2.616.863-.434Z" transform="translate(-330.756 -110.79)"/></g><g transform="translate(6.472 86.748)"><rect class="aa" width="3.655" height="0.966"/></g><g transform="translate(1.369 86.748)"><path class="aa" d="M47.872,353.345H46.2a.483.483,0,1,0,0,.966h1.674a.483.483,0,1,0,0-.966Z" transform="translate(-45.715 -353.345)"/></g><g transform="translate(1.369 78.521)"><path class="aa" d="M59.572,83.8l-.95-1.224a.482.482,0,0,0-.381-.187h-3.51V79a.483.483,0,0,0-.483-.483H46.2a.483.483,0,1,0,0,.966h7.567v3.381a.483.483,0,0,0,.483.483H58l.7.906v2.491H57.371a.483.483,0,0,0,0,.966h1.819a.483.483,0,0,0,.483-.483V84.092A.484.484,0,0,0,59.572,83.8Z" transform="translate(-45.715 -78.521)"/></g><g transform="translate(0.789 84.301)"><path class="aa" d="M29.058,271.6H26.836a.483.483,0,0,0,0,.966h2.222a.483.483,0,0,0,0-.966Z" transform="translate(-26.353 -271.597)"/></g><g transform="translate(0 82.401)"><path class="aa" d="M4.6,208.134H.483a.483.483,0,0,0,0,.966H4.6a.483.483,0,0,0,0-.966Z" transform="translate(0 -208.134)"/></g><g transform="translate(0.789 80.501)"><path class="aa" d="M30.958,144.672H26.836a.483.483,0,0,0,0,.966h4.122a.483.483,0,0,0,0-.966Z" transform="translate(-26.353 -144.672)"/></g></g></svg>',cartPageSpinner='<div class="search-loader"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div>';function initializeCartPage(){let e='<div class="new-cart-container"><div class="container">';const t=document.querySelectorAll("body .wrapper .main-container")[0];e+=generateCartTopBlock(),e+=getCartProductsGrid(),checkFreeDeliveryBlock()&&(e+=getFreeDeliveryInfo()),e+="</div>",e+='<div id="cart-order-block">',e+=generateCartOrderBlock(),e+="</div>",e+='<div id="fixed-cart-element-parent">',e+=generateCartFixedElement(),e+="</div>",e+="</div>",t.insertAdjacentHTML("afterbegin",e),setTimeout((()=>{postInsertingFunctionalities()}),300),subscribeToViewCartEditProductRequests()}function postInsertingFunctionalities(){const e=document.querySelectorAll(".new-cart-container .cost-summary .total-price.cart-summary")[0];e&&(e.innerHTML=`<div class="product-price">\n\t<div class="block-label">${cartConfig.totalCost}</div> <div class="price">\n\t${getSupFromTextCart(e.innerText)}<div>\n\t</div>`);document.querySelectorAll(".new-cart-container .single-cart-product .cart-price-block .old-price").forEach((e=>{e&&(e.innerHTML=`<div class="product-price">\n\t<div class="block-label">${getSupFromTextCart(e.innerText)}</div>\n\t</div>`)}));document.querySelectorAll(".new-cart-container .single-cart-product .cart-price-block .total-price").forEach((e=>{e&&(e.innerHTML=`<div class="product-price">\n\t<div class="block-label">${getSupFromTextCart(e.innerText)}</div>\n\t</div>`)})),generateCartPromotionInput(),addSubmitButtonListener(),toggleFixedCartElement()}function generateCartTopBlock(){let e='<div class="cart-top-block">';return e+='<div class="left-child">COSUL MEU</div>',e+=`<div class="right-child">${document.querySelectorAll('body .wrapper .main-container [data-testing-id="cart-page"] .contact-links')[0]?document.querySelectorAll('body .wrapper .main-container [data-testing-id="cart-page"] .contact-links')[0].outerHTML:""}</div>`,e+="</div>",e}function getCartProductsGrid(){let e='<div class="cart-products-block">';return getCartProductsObject().forEach((t=>{if(e+='<div class="single-cart-product">',e+=`<div class="general-info">\n\t\t<div class="image">${t.image}${t.wishlistButton}</div>\n\t\t<div class="product-info">\n\t\t<div class="remove-button">${t.removeButton}</div>\n\t\t<div class="title">${t.title}</div>\n\t\t<div class="description">${t.description}</div>\n\t\t<div class="cart-price-block">`,e+=`<div class="price" id="new_price_${t.productId}">`,t.hasPreorder&&""!==t.hasPreorder&&(e+=`<div class="new-preorder-element">\n\t\t${cartConfig.preorderAvailable}\n\t\t</div>`),e+=`${t.price.toLowerCase().includes("nan")?"":t.price}`,t.isFree&&""!==t.isFree&&(e+=`<div class="new-free-element">\n\t\t${cartConfig.isFree}\n\t\t</div>`),e+='</div>\n\t\t<div class="grid-parent">\n\t\t<div class="count-select">',t.isFree&&""!==t.isFree)t.isFreeValue&&t.isFreeValue.childNodes[2]&&(t.isFreeValue=t.isFreeValue.childNodes[2].textContent),e+=Number(t.isFreeValue);else{e+=`<select id="select_${t.productId}" onchange="simulateCartSelectClick('${t.productId}')">`;let r=15;for(a=1;a<=r;a++)e+=`<option ${a===Number(t.inputCountValue)?'selected="true"':""}>${a}</option>`;e+="</select>"}e+="</div>",t.unitPrice&&(e+=`<div class="unit-price ${Number(t.inputCountValue)>1?"visible":""}" id="unit_price_${t.productId}">${getElementUnitPrice(t.unitPrice)}</div>`),e+="</div></div>\n\t\t</div>",e+="</div>",""!==t.variations&&(e+=`<div class="variations-block">\n\t\t${parseCartVariations(t.variations)}\n\t\t${t.editButton}\n\t\t</div>`),!t.promotionBlock||""===t.promotionBlock||t.isFree&&""!==t.isFree||(e+=`<div class="new-promo-block ${t.hasPromoCode?"has-promo-code":""}">`,e+=`${t.promotionBlock}\n\t\t</div>`),t.hasPreorder?e+=`<div class="arrival-block preorder-arrival">\n <strong>${cartConfig.fullArrivalTimeInfoSpan}</strong>\n <span>${cartConfig.fullArrivalTimeInfo} <span id="CartProduct_${t.productId}">${getArrivalTimeByProductIdPreorder(t.productId)}</span></span>\n\t\t</div>`:e+=`<div class="arrival-block" id="CartProduct_${t.productId}">\n\t\t${iconCarCart}${getArrivalTimeByProductId(t.productId)}\n\t\t</div>`,e+="</div>"})),e+="</div>",e}function getElementUnitPrice(e){let t="";return e&&e.split("lei").length>1?(t=e.split(",").length>1?e.split(",")[0]+",<sup>"+(e&&e.split(",")[1]&&e.split(",")[1].split("lei")[0]?e.split(",")[1].split("lei")[0].replaceAll(" ",""):"")+"</sup>lei":e.split("lei")[0]+",<sup>00</sup>lei",t+=` / ${cartConfig.piece}`):t=e,t}function parseCartVariations(e){let t='<div class="cart-product-variations">';var r=document.createElement("div");return r&&(r.innerHTML=e),dtElements=r.querySelectorAll("dt"),ddElements=r.querySelectorAll("dd"),dtElements.forEach(((e,r)=>{t+='<div class="variation-parent">',dtElements[r]&&(t+=`<dt>${dtElements[r].innerHTML}</dt>`),ddElements[r]&&(t+=`<dd>${ddElements[r].innerHTML}</dd>`),t+="</div>"})),t+="</div>",t}function simulateCartSelectClick(e){let t,r,l=document.getElementById("select_"+e).value;if(document.querySelectorAll('[data-sku="'+e+'"]')[0]&&document.querySelectorAll('[data-sku="'+e+'"]')[0].closest(".list-item-row")&&(t=document.querySelectorAll('[data-sku="'+e+'"]')[0].closest(".list-item-row").querySelectorAll(".quantity .ish-productQuantity-select")[0]),t&&t.querySelectorAll("input")[0]){let e=t.querySelectorAll("input")[0].value;for(;Number(e)!==Number(l);)Number(l)>Number(e)?(t.querySelectorAll(".btn-number .plus")[0].click(),e++):Number(l)<Number(e)&&(t.querySelectorAll(".btn-number .minus")[0].click(),e--)}if(t&&t.querySelectorAll("input")[0]&&Number(t.querySelectorAll("input")[0].value)>=10){let r="";for(a=1;a<=15;a++)r+=`<option ${a===Number(t.querySelectorAll("input")[0].value)?'selected="true"':""}>${a}</option>`;document.getElementById("select_"+e)&&(document.getElementById("select_"+e).innerHTML=r)}if(l&&t&&t.querySelectorAll("input")[0]&&Number(l)>Number(t.querySelectorAll("input")[0].value)){let r="";for(a=1;a<=15;a++)r+=`<option ${a===Number(t.querySelectorAll("input")[0].value)?'selected="true"':""}>${a}</option>`;document.getElementById("select_"+e)&&(document.getElementById("select_"+e).innerHTML=r)}if(document.getElementById("select_"+e).value=t.querySelectorAll("input")[0].value,t&&t.querySelectorAll("input")[0]&&Number(t.querySelectorAll("input")[0].value)>1?$("#unit_price_"+e).addClass("visible"):$("#unit_price_"+e).removeClass("visible"),document.getElementById("ArrivalTime"+e)?r=document.getElementById("ArrivalTime"+e).closest(".list-item-row"):document.querySelectorAll('[data-sku="'+e+'"]')[0]&&(r=document.querySelectorAll('[data-sku="'+e+'"]')[0].closest(".list-item-row")),r){let t,l;r.querySelectorAll(".price .old-price")[0]&&(t=getSupFromTextCart(r.querySelectorAll(".price .old-price")[0].innerText)),r&&r.querySelectorAll(".list-item .price .total-price")[0]&&(l=r.querySelectorAll(".list-item .price .total-price")[0].innerHTML),t&&document.getElementById("new_price_"+e)&&document.getElementById("new_price_"+e).querySelectorAll(".old-price")[0]&&(document.getElementById("new_price_"+e).querySelectorAll(".old-price")[0].innerHTML=t),l&&document.getElementById("new_price_"+e)&&document.getElementById("new_price_"+e).querySelectorAll(".total-price .product-price .block-label")[0]&&(document.getElementById("new_price_"+e).querySelectorAll(".total-price .product-price .block-label")[0].innerHTML=getSupFromTextCart(l))}const o=document.getElementById("fixed-cart-element-parent"),i=document.getElementById("cart-order-block");o&&(o.innerHTML=""),i&&(i.innerHTML="",i.innerHTML=generateCartOrderBlock()),o&&(o.innerHTML=generateCartFixedElement()),postInsertingFunctionalities()}function getCartProductsObject(){const e=[];return document.querySelectorAll('[data-testing-id="cart-page"] .list-body-cart .list-item-row').forEach((t=>{let r=!1;t&&t.querySelectorAll(".button-container .wishlist-btn")[0]&&(t.querySelectorAll(".button-container .wishlist-btn")[0].innerHTML=iconHeart),t.querySelectorAll(".btn-tool.btn-delete")[0]&&(t.querySelectorAll(".btn-tool.btn-delete")[0].innerHTML=trashIcon);const l=t.querySelectorAll('.button-container a[title="Editeaza"]')[0];if(l&&(l.innerText="Modifica",l.title="Modifica"),t.querySelectorAll(".list-item-promo")[0]&&t.querySelectorAll(".list-item-promo")[0].childNodes[0]&&t.querySelectorAll(".list-item-promo")[0].childNodes[0].nodeValue&&t.querySelectorAll(".list-item-promo")[0].childNodes[0].nodeValue.replaceAll("\n","").split(" ")){let e=t.querySelectorAll(".list-item-promo")[0].childNodes[0].nodeValue.replaceAll("\n","").split(" ");if(e=e.filter((e=>""!==e)),1===e.length){let e=`<div class="promo-label">${cartConfig.promo}</div>`;t.querySelectorAll(".list-item-promo")[0].insertAdjacentHTML("afterbegin",e),r=!0}}const o={image:t&&t.querySelectorAll(".pli-image-container")[0]?t.querySelectorAll(".pli-image-container")[0].innerHTML:"",title:t.querySelectorAll(".descr-container .list-item .pli-description .product-title")[0].outerHTML,description:t.querySelectorAll(".descr-container .list-item .pli-description .product-desc")[0].outerHTML,price:t.querySelectorAll(".descr-container .list-item .pli-description .price")[0].outerHTML,unitPrice:t&&t.querySelectorAll(".descr-container .list-item .pli-description .price .unit-price")[0]&&t.querySelectorAll(".descr-container .list-item .pli-description .price .unit-price")[0].innerHTML?t.querySelectorAll(".descr-container .list-item .pli-description .price .unit-price")[0].innerHTML.replaceAll("pret ","").replaceAll("цена ",""):"",arrivalTime:t.querySelectorAll(".descr-container .list-item .pli-description .product-info .eta-display.service-list")[0]?t.querySelectorAll(".descr-container .list-item .pli-description .product-info .eta-display.service-list")[0].outerHTML:"",productId:t.querySelectorAll(".pli-description .eta-display .eta-text #ArrivalTime")[0]?t.querySelectorAll(".pli-description .eta-display .eta-text #ArrivalTime")[0].getAttribute("data-sku"):"",wishlistButton:t.querySelectorAll(".button-container .wishlist-btn")[0].outerHTML,removeButton:t.querySelectorAll(".btn-tool.btn-delete")[0]?t.querySelectorAll(".btn-tool.btn-delete")[0].outerHTML:"",variations:t.querySelectorAll(".descr-container .list-item .pli-description dl.dl-horizontal")[0]?t.querySelectorAll(".descr-container .list-item .pli-description dl.dl-horizontal")[0].outerHTML:"",editButton:t.querySelectorAll('.button-container a[title="Modifica"]')[0]?t.querySelectorAll('.button-container a[title="Modifica"]')[0].outerHTML:"",inputCountValue:t.querySelectorAll(".ish-productQuantity-input")[0]?t.querySelectorAll(".ish-productQuantity-input")[0].value:"",promotionBlock:t.querySelectorAll(".list-item-promo")[0]?t.querySelectorAll(".list-item-promo")[0].outerHTML:"",hasPromoCode:r,isFree:t.querySelectorAll(".list-item-promo .-promoInfo")[0]?t.querySelectorAll(".list-item-promo .-promoInfo")[0].innerText:"",hasPreorder:t.querySelectorAll(".product-label.product-label-sale").length>0,isFreeValue:t.querySelectorAll(".quantity.list-item .form-group")[0]?t.querySelectorAll(".quantity.list-item .form-group")[0]:""};e.push(o)})),e}function getArrivalTimeByProductId(e){$.ajax({type:"POST",url:customConfig.productArrivalRequest+"?ProductSKU="+e,async:!0,success:t=>{$(`#CartProduct_${e}`).html(`${iconCarCart}<span>${cartConfig.deliveryEstimation}: </span>${t&&!t.includes("NA")?getSimplifiedData(t.split("<!")[0]):"NA"}`)},error:()=>{$(`#CartProduct_${e}`).html(`${iconCarCart}<span>${cartConfig.deliveryEstimation}: </span>NA`)}})}function getArrivalTimeByProductIdPreorder(e){$.ajax({type:"POST",url:customConfig.productArrivalRequest+"?ProductSKU="+e,async:!0,success:t=>{$(`#CartProduct_${e}`).html(`${t&&!t.includes("NA")?getFullDateByFormatted(t.split("<!")[0]):"NA"}`)},error:()=>{$(`#CartProduct_${e}`).html("NA")}})}function getFreeDeliveryInfo(){let e='<div class="free-delivery-block">';return document.getElementById("free-delivery-info")&&(e+=document.getElementById("free-delivery-info").innerText),e+="</div>",e}function checkFreeDeliveryBlock(){return document.querySelectorAll("#free-delivery-info").length>0}function generateCartOrderBlock(){let e='<div class="cart-order-block"> <div class="container">';const t=document.querySelectorAll('[data-testing-id="cart-page"] .order-summary')[0];return t&&(e+=t.outerHTML),e+="</div></div>",e}function generateCartPromotionInput(){let e="";const t=document.querySelectorAll(".new-cart-container .cost-summary .promotioninput")[0];t&&(t.innerHTML="");const r=document.querySelectorAll('[data-testing-id="cart-page"] .cost-summary .applied-promotion-code'),l=document.querySelectorAll('[data-testing-id="cart-page"] .cost-summary .details-link'),o=[];r.forEach(((e,t)=>{e.querySelectorAll(".btn-delete-promotion")[0]&&(e.querySelectorAll(".btn-delete-promotion")[0].innerHTML=trashIcon),o.push({removeButton:e.querySelectorAll(".btn-delete-promotion")[0]?e.querySelectorAll(".btn-delete-promotion")[0].outerHTML:"",detailsButton:l[t]?l[t].outerHTML:"",code:e.querySelectorAll(".code")[0]?e.querySelectorAll(".code")[0].outerHTML:""})})),e+='<div class="new-promotion-input">',o.length>0&&(e+=`<div class="promotion-label">${cartConfig.appliedVouchers}</div>`),e+='<div class="promotion-codes">',o.forEach((t=>{e+=`<div class="single-promotion">\n\t\t<div class="promotion-code">${t.code}</div>\n\t\t<div class="promotion-details">${t.detailsButton}</div>\n\t\t<div class="promotion-remove" onclick="removeAppliedVoucher('${t.removeButton.split('data-promotion-code="')[1].split('"')[0]}')">${t.removeButton}</div>\n\t\t</div>`})),e+="</div>",e+=`<div class="promotion-label">${cartConfig.haveVoucher}</div>`,e+=`<div class="add-voucher-input" id="add-voucher-input-parent">\n    <input id="add-new-voucher-input" placeholder="${cartConfig.addCodePlaceholder}" onkeypress="simulatePromoSubmitOnEnter(event)">\n    <div class="apply-button" id="cart-apply-button">${cartConfig.apply}</div>\n    </div>`,document.querySelectorAll(".promotioninput .alert-danger.promoentry.in")[0]&&document.querySelectorAll(".promotioninput .alert-danger.promoentry.in")[0].innerText&&(e+=`<div class="danger-text alert-danger">${document.querySelectorAll(".promotioninput .alert-danger.promoentry.in")[0]?document.querySelectorAll(".promotioninput .alert-danger.promoentry.in")[0].innerHTML:""}</div>`),e+="</div>",t&&(t.innerHTML=e),addCartInputListener(),document.querySelectorAll('.new-cart-container [data-section="CartCheckoutButtons"] button')[0]&&(document.querySelectorAll('.new-cart-container [data-section="CartCheckoutButtons"] button')[0].innerText=cartConfig.nextStep)}function addCartInputListener(){document.getElementById("add-voucher-input-parent");document.getElementById("add-new-voucher-input")&&(document.getElementById("add-new-voucher-input").addEventListener("input",(e=>{e.target.value.length>0?$("#add-voucher-input-parent .apply-button").addClass("active"):$("#add-voucher-input-parent .apply-button").removeClass("active")})),document.getElementById("cart-apply-button")&&document.getElementById("cart-apply-button").addEventListener("click",(e=>{document.getElementById("add-new-voucher-input").value.length>0&&(document.querySelectorAll('[data-testing-id="cart-page"] .promotioninput .promoentry a')[0].click(),document.getElementById("promotionCode").value=document.getElementById("add-new-voucher-input").value,document.getElementById("applyPromotion").disabled=!1,document.getElementById("applyPromotion").click())})))}function simulatePromoSubmitOnEnter(e){let t;e&&e.which&&(t=e.which),13===t&&document.getElementById("cart-apply-button").click()}function removeAppliedVoucher(e){const t=e;document.querySelectorAll(`[data-testing-id="cart-page"] [data-promotion-code="${t}"]`)[0].click()}function getFullDateByFormatted(e){const t=e.split(".");return Number(t[0])+" "+cartConfig.months[Number(t[1])-1]+" "+(t[2]?t[2]:(new Date).getFullYear())}function generateCartFixedElement(){let e='<div class="fixed-cart-element" id="fixed-cart-element"><div class="container">';return e+=`<div class="left-child">\n\t<span class="total">${cartConfig.total}</span>\n\t<span class="price">${document.querySelectorAll(".total-price.cart-summary")[0]?setTotalPriceSup(document.querySelectorAll(".total-price.cart-summary")[0].innerText):""}</span>\n\t</div>`,e+=`<div class="right-child" onclick="simulateCartNextStepClick()">${cartConfig.nextStep}</div>`,e+="</div></div>",document.getElementById("#fixed-cart-element")&&(document.getElementById("#fixed-cart-element").outerHTML=e),e}function setTotalPriceSup(e){return e.includes("<sup>")||(e=e.split(",")[0]+","+(e.split(",")[1]?"<sup>"+e.split(",")[1].split(" ")[0]+"</sup>":"")+e.split(" ")[1]),e}function simulateCartNextStepClick(){document.querySelectorAll('.new-cart-container [data-section="CartCheckoutButtons"] button')[0].click()}function addSubmitButtonListener(){document.querySelectorAll('.new-cart-container [data-section="CartCheckoutButtons"] button')[0]&&document.querySelectorAll('.new-cart-container [data-section="CartCheckoutButtons"] button')[0].addEventListener("click",(()=>{document.querySelectorAll('[data-testing-id="cart-page"] [data-section="CartCheckoutButtons"] button')[0].click()}))}function toggleFixedCartElement(){if($('.new-cart-container .cart-order-block [data-section="CartCheckoutButtons"]')&&$('.new-cart-container .cart-order-block [data-section="CartCheckoutButtons"]').offset()){const e=$('.new-cart-container .cart-order-block [data-section="CartCheckoutButtons"]').offset().top;e<$(window).scrollTop()+window.innerHeight?$(".new-cart-container .fixed-cart-element").removeClass("fixed"):$(".new-cart-container .fixed-cart-element").addClass("fixed"),$(window).scrollTop()>e&&document.getElementById("mobile-footer")&&($(".new-cart-container .fixed-cart-element").addClass("fixed"),document.getElementById("mobile-footer").style.paddingBottom="70px")}}function customizeEditProductPopup(){const e=document.querySelectorAll("body");if(document.getElementById("new-cart-modal"))$("#new-popup-content").html(cartPageSpinner),$("#new-popup-variations").remove(),setTimeout((()=>{document.getElementById("new-modal-header")&&($("#new-popup-content").remove(),document.getElementById("new-modal-header").insertAdjacentHTML("afterend",generateEditProductPopupContent()+getPopupVariationsObject()))}),1200);else{let t='<div class="modal fade in" role="dialog" aria-labelledby="modalLabel-26d8" aria-hidden="true" style="display: block;" id="new-cart-modal-parent"><div class="modal-dialog" data-dynamic-block=""><div class="modal-content">';t+='<div id="new-cart-modal">',t+=generateEditProductHeader(),t+=generateEditProductPopupContent(),t+=getPopupVariationsObject(),t+=generatePopupActionButtons(),t+="</div></div></div></div>",e[0].insertAdjacentHTML("beforeend",t)}setTimeout((()=>{document.querySelectorAll(".modal-backdrop").forEach((e=>{e.addEventListener("click",(()=>{closeEditProductPopup()}))}))}),300)}function subscribeToViewCartEditProductRequests(){$(document).bind("ajaxComplete",((e,t,r)=>{r.url.includes("ViewCart-EditProduct")&&customizeEditProductPopup(),(r.url.includes("ViewCart-RemoveProduct")||r.url.includes("ViewCart-AjaxCart"))&&generateCartFixedElement()}))}function generateEditProductHeader(){let e='<div class="new-modal-header" id=new-modal-header>';return e+=`<div class="header-name">${cartConfig.editProduct}</div>`,e+=`<div class="close-popup" onclick="closeEditProductPopup()">${closeIcon}</div>`,e+="</div>",e}function generateEditProductPopupContent(){const e=getEditPopupSelectedVariations(),t=checkEditProductStock();let r='<div class="new-modal-content" id="new-popup-content">';return r+=`<div class="content-parent"><div class="left-child">\n\t<div class="product-name">${document.querySelectorAll('.modal [name="editVariationCommand"] .modal-title')[0].innerText}</div>`,e.length>0&&(r+='<div class="current-variations">',e.forEach((e=>{r+=`<div class="single-variation">\n\t\t<div class="label-name">${e.label}:</div>\n\t\t<div class="name">${e.value}</div>\n\t\t</div>`})),r+="</div>"),r+="</div>",r+=`<div class="right-child">${document.querySelectorAll(".modal .product-details img")[0].outerHTML}</div></div>`,r+=`<div class="main-info">\n\t<div class="prices">\n\t<div class="old-price">${getSupFromTextCart(document.querySelectorAll('.modal [data-testing-id="old-price"]')[0].innerText)}</div>\n\t<div class="current-price">${getSupFromTextCart(document.querySelectorAll('.modal [data-testing-id="current-price"]')[0].innerText)}</div>\n\t</div>\n\t<div class="stock-value">\n\t<div class="stock-availability ${t?"available":"not-available"}">${t?cartConfig.inStock:cartConfig.notInStock}</div>\n\t<div class="stock-info">${t?"":cartConfig.notInStockContent}</div>\n\t</div>\n\t</div>`,r+="</div>",r}function closeEditProductPopup(){document.querySelectorAll('.modal .modal-header button[data-dismiss="modal"]')[0].click(),$(".edit-absolute-layout").remove(),$("#new-cart-modal-parent").remove(),$(".modal-dialog").remove()}function getEditPopupSelectedVariations(){const e=document.querySelectorAll(".modal .product-info .product-variation-container .product-variation");let t=[];return e.forEach((e=>{t.push({label:e.querySelectorAll(".control-label")[0]?e.querySelectorAll(".control-label")[0].innerText:"",value:e.querySelectorAll('[selected="selected"]')[0]?e.querySelectorAll('[selected="selected"]')[0].value:""})})),t}function getSupFromTextCart(e){if(e){const t=(e=e.replaceAll("lei","").replaceAll(" ","")).split(",")[0]+",<sup>"+(e.split(",")[1]?e.split(",")[1]:"00")+"</sup>lei";return t&&!t.toLowerCase().includes("nan")?t:""}return""}function checkEditProductStock(){let e=!0;return document.querySelectorAll(".modal .modal-body .product-variation-container .product-variation select").forEach((t=>{t.querySelectorAll('[selected="selected"]')[0]&&(t.querySelectorAll('[selected="selected"]')[0].innerText.includes("epuizat")||t.querySelectorAll('[selected="selected"]')[0].innerText.includes("- disponibil"))&&(e=!1)})),e}function getPopupVariationsObject(){let e=document.querySelectorAll(".modal .product-variation-container .product-variation"),t=[],r='<div class="product-variations-block popup-variations" id="new-popup-variations">';return e.forEach((e=>{let r={label:"",selectorId:"",options:[]};e&&e.getElementsByClassName("control-label")[0]&&(r.label=capitalizeFirstLetter(e.getElementsByClassName("control-label")[0].innerText.toLowerCase())+": "),r.selectorId=e.querySelectorAll("select")[0].attributes.id.nodeValue;e.querySelectorAll("select option").forEach((e=>{r.options.push({value:e.attributes.value.nodeValue,state:getProductOptionState(e)})})),t.push(r)})),t.forEach((e=>{r+=`<div class="single-variation"><div class="variation-label">${cartConfig.selectLabel} ${e.label}</div>\n        <div class="scroll-parent">\n\t\t<div class="variation-items">`,e.options.forEach((t=>{r+=`<div class="item ${t.state.includes("unvailable")?"unvailable":""} ${t.state.includes("selected")?"selected":""}" onclick="setPopupSelectorValueById('${e.selectorId}', '${t.value}')">`,r+=`${t.value}\n\t\t\t</div>`})),r+="</div></div></div>"})),r+="</div>",r}function setPopupSelectorValueById(e,t){e&&($(`[id="${e}"]`).val(t),$(`[id="${e}"]`).trigger("change"),customizeEditProductPopup())}function generatePopupActionButtons(){let e='<div class="popup-action-buttons">';return e+=`<div class="cancel" onclick="simulateEditPopupCancel()">${cartConfig.cancelButton}</div>`,e+=`<div class="modify" onclick="simulateEditPopupSave()">${cartConfig.modifyButton}</div>`,e+="</div>",e}function simulateEditPopupCancel(){const e=document.querySelectorAll('.modal [name="cancel"]')[0];e&&(e.click(),$(".modal-dialog").remove())}function simulateEditPopupSave(){document.querySelectorAll('.modal [type="submit"]')[0].click()}getCartPageData();